<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
</head>
<body>
        <button data-toon="spider-ham">spider ham</button>
        <button data-toon="spongebob">spongebob</button>
        <button data-toon="koko the clown">koko the clown</button>
    <!-- Movies will get dumped here -->
    <div id="buttons-view"></div>


    <form id="cartoon-form">
            <label for="cartoon-input">Add a toon!</label>
            <input type="text" id="cartoon-input">
            <br>
      
            <!-- Button triggers new cartoon to be added -->
            <input id="add-cartoon" type="submit" value="Add a toon!">
          </form>
          <div id="gifs-appear-here">
            </div>

    <img src="https://media1.giphy.com/media/3o85xkQpyMlnBkpB9C/200_s.gif"
    data-still="https://media1.giphy.com/media/3o85xkQpyMlnBkpB9C/200_s.gif"
    data-animate="https://media1.giphy.com/media/3o85xkQpyMlnBkpB9C/200.gif"
    data-state="still"
    class="gif">
  <img src="https://media2.giphy.com/media/8rFQp4kHXJ0gU/200_s.gif"
    data-still="https://media2.giphy.com/media/8rFQp4kHXJ0gU/200_s.gif"
    data-animate="https://media2.giphy.com/media/8rFQp4kHXJ0gU/200.gif"
    data-state="still" class="gif">
  <img src="https://media3.giphy.com/media/W6LbnBigDe4ZG/200_s.gif" data-still="https://media3.giphy.com/media/W6LbnBigDe4ZG/200_s.gif" data-animate="https://media3.giphy.com/media/W6LbnBigDe4ZG/200.gif" data-state="still" class="gif">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">

// 1. Before you can make any part of your site work, you need to create an array of strings, each one related to a topic that interests you. Save it to a variable called `topics`.
//    * We chose animals for our theme, but you can make a list to your own liking.
var cartoons = ["bugs bunny", "porky pig", "bart simpson", "spider-ham"];

// 2. Your app should take the topics in this array and create buttons in your HTML.
//    * Try using a loop that appends a button for each string in the array.


 // Function for displaying movie data
 function renderButtons() {

// Delete the content inside the buttons-view div prior to adding new movies
// (this is necessary otherwise you will have repeat buttons)
$("#buttons-view").empty();

// Loop through the array of topics, then generate buttons for each topic in the array
for(var i = 0; i < cartoons.length; i++) {
  // create a button and save a reference
  var $Button = $("<button>");
    console.log(cartoons[i]);
  // update the text of the button
  $Button.text(cartoons[i]);
  // append the button to the page
  $("#buttons-view").append($Button);
}
}
// This function handles events where the add cartoon button is clicked
$("#cartoon-form").on("submit", function(event) {
        // event.preventDefault() prevents submit button from trying to send a form.
        // Using a submit button instead of a regular button allows the user to hit
        // "Enter" instead of clicking the button if desired
        event.preventDefault();

        // Write code to grab the text the user types into the input field
        var userText = $("#cartoon-input").val();
        $("#cartoon-input").val("");
        // Write code to add the new cartoon into the cartoons array
        cartoons.push(userText);

        // The renderButtons function is called, rendering the list of cartoon buttons
        renderButtons();
      });

      // Calling the renderButtons function to display the initial list of cartoons
      renderButtons();


// 3. When the user clicks on a button, the page should grab 10 static, non-animated gif images from the GIPHY API and place them on the page.
$("button").on("click", function() {
      var toon = $(this).attr("data-toon");
      var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
        toon + "&api_key=BkaUZZWcFij6J7AoQj3WtPb1R2p9O6V9&limit=10";

      $.ajax({
        url: queryURL,
        method: "GET"
      })
        .then(function(response) {
          var results = response.data;
          console.log(response);
          console.log(response.data);

          for (var i = 0; i < results.length; i++) {
            var toonDiv = $("<div>");

            var rating = results[i].rating;

            var p = $("<p>").text("Rating: " + rating);

            var toonImage = $("<img>");
            toonImage.attr("src", results[i].images.fixed_height.url);

            // var toonImage = $("<img>").attr("src", results[i].images.fixed_height.url);

          toonDiv.append(p);
          toonDiv.append(toonImage);
          $("#gifs-appear-here").prepend(toonDiv);


            
          }
        });
    });

    

    
      
          
          
          
            

        // ==================================
        

// 4. When the user clicks one of the still GIPHY images, the gif should animate. If the user clicks the gif again, it should stop playing.

// 5. Under every gif, display its rating (PG, G, so on).
//    * This data is provided by the GIPHY API.
//    * Only once you get images displaying with button presses should you move on to the next step.

// 6. Add a form to your page that takes a value from a user input box and adds it to your `topics` array. Then make a function call that takes each topic in the array and remakes the buttons on the page.

// 7. Deploy your assignment to Github Pages.

// 8. **Rejoice**! You just made something really cool.








    $(".gif").on("click", function() {
      // STEP ONE: study the html above.
      // Look at all the data attributes.
      // Run the file in the browser. Look at the images.

      // After we complete steps 1 and 2 we'll be able to pause gifs from giphy.

      // STEP TWO: make a variable named state and then store the image's data-state into it.
      // Use the .attr() method for this.

      // ============== FILL IN CODE HERE FOR STEP TWO =========================

      // CODE GOES HERE
        var state = $(this).attr("data-state");
        console.log(state);
    
        if (state === "still") {
            // update data-state attr to "animate"
            // update src to the data-animate attribute
            var animateGif = $(this).attr("data-animate");
            $(this).attr("src", animateGif);
            $(this).attr("data-state", "animate");
        } else {
            // update state to "still"
            // update src to the data-still attribute
            var stillGif = $(this).attr("data-still");
            $(this).attr("src", stillGif);
            $(this).attr("data-state", "still");
        }
      // =============================================

      // STEP THREE: Check if the variable state is equal to 'still',
      // then update the src attribute of this image to it's data-animate value,
      // and update the data-state attribute to 'animate'.

      // If state is equal to 'animate', then update the src attribute of this
      // image to it's data-still value and update the data-state attribute to 'still'
      // ============== FILL IN CODE HERE FOR STEP THREE =========================

      // CODE GOES HERE

      // ==============================================

      // STEP FOUR: open the file in the browser and click on the images.
      // Then click again to pause.
    });
  </script>
</body>
</html>